<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
</head>
<body>
<!-- Sidebar Fragment -->
<div th:fragment="sidebar(activeTab)"
     class="bg-primary-800 dark:bg-darkpurple-900 text-white w-64 py-8 px-4 hidden md:block shadow-elevation-2 animate-slide-in-left transition-colors duration-300">
    <div class="mb-8">
        <h1 class="text-xl font-bold">CodeDrill</h1>
        <p class="text-primary-200 dark:text-darkpurple-200 text-sm transition-colors duration-300">Administrator
            Panel</p>
    </div>

    <nav>
        <ul>
            <li class="mb-2">
                <a href="/admin"
                   th:class="${activeTab == 'dashboard'} ?
                   'block py-2 px-4 bg-primary-700 dark:bg-darkpurple-800 rounded-lg font-medium transition-all duration-300 shadow-elevation-1' :
                   'block py-2 px-4 hover:bg-primary-700 dark:hover:bg-darkpurple-800 rounded-lg font-medium transition-all duration-300 hover:shadow-elevation-1'">
                Dashboard
                </a>
            </li>
            <li class="mb-2">
                <a href="/admin/users"
                   th:class="${activeTab == 'users'} ?
                   'block py-2 px-4 bg-primary-700 dark:bg-darkpurple-800 rounded-lg font-medium transition-all duration-300 shadow-elevation-1' :
                   'block py-2 px-4 hover:bg-primary-700 dark:hover:bg-darkpurple-800 rounded-lg font-medium transition-all duration-300 hover:shadow-elevation-1'">
                    User Management
                </a>
            </li>
            <li class="mb-2">
                <a href="/admin/moderators"
                   th:class="${activeTab == 'moderators'} ?
                   'block py-2 px-4 bg-primary-700 dark:bg-darkpurple-800 rounded-lg font-medium transition-all duration-300 shadow-elevation-1' :
                   'block py-2 px-4 hover:bg-primary-700 dark:hover:bg-darkpurple-800 rounded-lg font-medium transition-all duration-300 hover:shadow-elevation-1'">
                    Manage Moderators
                </a>
            </li>
            <li class="mb-2">
                <a href="/moderator/tasks"
                   th:class="${activeTab == 'tasks'} ?
                   'block py-2 px-4 bg-primary-700 dark:bg-darkpurple-800 rounded-lg font-medium transition-all duration-300 shadow-elevation-1' :
                   'block py-2 px-4 hover:bg-primary-700 dark:hover:bg-darkpurple-800 rounded-lg font-medium transition-all duration-300 hover:shadow-elevation-1'">
                    Task Management
                </a>
            </li>
            <!-- NEW: Gamification Management Section -->
            <li class="mb-2">
                <a href="/admin/achievements"
                   th:class="${activeTab == 'achievements'} ?
                   'block py-2 px-4 bg-primary-700 dark:bg-darkpurple-800 rounded-lg font-medium transition-all duration-300 shadow-elevation-1' :
                   'block py-2 px-4 hover:bg-primary-700 dark:hover:bg-darkpurple-800 rounded-lg font-medium transition-all duration-300 hover:shadow-elevation-1'">
                    Achievements
                </a>
            </li>
            <li class="mb-2">
                <a href="/admin/learning-paths"
                   th:class="${activeTab == 'learning-paths'} ?
                   'block py-2 px-4 bg-primary-700 dark:bg-darkpurple-800 rounded-lg font-medium transition-all duration-300 shadow-elevation-1' :
                   'block py-2 px-4 hover:bg-primary-700 dark:hover:bg-darkpurple-800 rounded-lg font-medium transition-all duration-300 hover:shadow-elevation-1'">
                    Learning Paths
                </a>
            </li>
            <li class="mb-2">
                <a href="/analytics/admin"
                   th:class="${activeTab == 'analytics'} ?
                   'block py-2 px-4 bg-primary-700 dark:bg-darkpurple-800 rounded-lg font-medium transition-all duration-300 shadow-elevation-1' :
                   'block py-2 px-4 hover:bg-primary-700 dark:hover:bg-darkpurple-800 rounded-lg font-medium transition-all duration-300 hover:shadow-elevation-1'">
                    Analytics Dashboard
                </a>
            </li>
            <li class="mb-2">
                <a href="/tasks"
                   th:class="'block py-2 px-4 hover:bg-primary-700 dark:hover:bg-darkpurple-800 rounded-lg font-medium transition-all duration-300 hover:shadow-elevation-1'">
                    View Public Site
                </a>
            </li>
            <li class="mb-2">
                <a href="/change-password"
                   th:class="'block py-2 px-4 hover:bg-primary-700 dark:hover:bg-darkpurple-800 rounded-lg font-medium transition-all duration-300 hover:shadow-elevation-1'">
                    Change Password
                </a>
            </li>

            <!-- Dark mode toggle in sidebar -->
            <li class="mb-4 flex justify-center">
                <button id="theme-toggle"
                        class="theme-toggle bg-primary-700 dark:bg-darkpurple-800 p-2 rounded-full transition-colors duration-300"
                        aria-label="Toggle dark mode" aria-checked="false">
                    <svg class="moon-icon w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                         xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                    </svg>
                    <svg class="sun-icon w-5 h-5 text-yellow-300 hidden" fill="none" stroke="currentColor"
                         viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                    </svg>
                </button>
            </li>

            <li class="mt-8">
                <form th:action="@{/logout}" method="post">
                    <button type="submit"
                            class="material-btn block w-full py-2 px-4 text-left hover:bg-primary-700 dark:hover:bg-darkpurple-800 rounded-lg font-medium transition-all duration-300 hover:shadow-elevation-1">
                        Logout
                    </button>
                </form>
            </li>
        </ul>
    </nav>
</div>
</div>
</body>
</html>
